# Module 4: Lab 4 - Azure Sentinel


Azure Sentinel is your bird's-eye view across the enterprise. Put the cloud and large-scale intelligence from decades of Microsoft security experience to work. Make your threat detection and response smarter and faster with artificial intelligence (AI)


## Exercise 1: On-board Azure Sentinel


To on-board Azure Sentinel, you first need to enable Azure Sentinel, and then connect your data sources. Azure Sentinel comes with a number of connectors for Microsoft solutions, available out of the box and providing real-time integration, including Microsoft Threat Protection solutions, Microsoft 365 sources, including Office 365, Azure AD, Azure ATP, and Microsoft Cloud App Security, and more. In addition, there are built-in connectors to the broader security ecosystem for non-Microsoft solutions. You can also use common event format, Syslog or REST-API to connect your data sources with Azure Sentinel.  

After you connect your data sources, choose from a gallery of expertly created workbooks that surface insights based on your data. These workbooks can be easily customized to your needs.


### Task 1: Enable Azure Sentinel

1.  In the Azure portal, select **All Services** search for **Azure Sentinel**. Select **Azure Sentinel**
1.  Click **Connect workspace**.

1. Choose the Log Analytics workspace**myWorkspaceDemo(yourname)** from the Azure Monitor Lab we created earlier

1. Click **Add Azure Sentinel**

    **Note**: </br> - Default workspaces created by Azure Security Center will not appear in the list; you can't install Azure Sentinel on them. </br> - Azure Sentinel can run on workspaces in any GA region of Log Analytics except the China, Germany and Azure Government regions. Data generated by Azure Sentinel (such as incidents, bookmarks, and alert rules, which may contain some customer data sourced from these workspaces) is saved either in West Europe (for workspaces located in Europe) or East US (for all US-based workspaces, as well as any other region except Europe).

### Task 3: Connect data sources


Azure Sentinel creates connections to services and apps by connecting to the service and forwarding the events and logs to Azure Sentinel. For machines and virtual machines, you can install the Azure Sentinel agent that collects the logs and forwards them to Azure Sentinel. For Firewalls and proxies, Azure Sentinel utilizes a Linux Syslog server. The agent is installed collects the log files and forwards them to Azure Sentinel. 


1. Under **Configuration** select **Data connectors**. This page lets you see the full list of connectors that Azure Sentinel provides and their status.

1.  Select **Azure Activity** and click **Open connector page**.

1.  Select **Configure Azure Activity logs**.

1. Click on **your subscription** and click **Connect**

1. go back to the connector page

1. Under **Configuration** select **Data connectors**. This page lets you see the full list of connectors that Azure Sentinel provides and their status.

1.  Select **Azure Activity** 

1. You should see a summary of the data in the **Data received** graph, and connectivity status of the data types. (Note it may take some time for data to start cming through)

1. Under **Configuration** select **Data connectors**. This page lets you see the full list of connectors that Azure Sentinel provides and their status.

1. Select **Azure Security Center** and click **Open connector page**.

1. SelectNext to your subscription select **Connect** then under Create incidents click **Enable**


### Task2: Configure Analytics

1. Under **Configuration** select **Analytics**. 

1. Click **Rule templates**

1. take a minute to look through the types of Rules you can create from here includong the Data Sources. Sort by **Data Sources** and select **Suspicious number of resource creation or deployment** click **Create Rule** .

1. Accept the defaults and click **Next: Set rule logic**

1. Accept the defaults and click **Next: Incident settings**

1. Accept the defaults and click **Next: Automated response**

1. This is where we can add a playbook(Logic App) to a rule to automate the remediation of an issue.

1. Click **Next: Review**

1. Click **Create**

1. We should now see a new Active rule.

### Create a custom rule and automate the response.

1. 



**Results**: You have now completed this lab.
